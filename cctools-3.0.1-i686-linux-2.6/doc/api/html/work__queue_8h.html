<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cctools: work_queue.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_7afb20efd3222486f618d55c1155b0c9.html">dttools</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_6c8716ef915dcad8c2de740107ec87f7.html">src</a></div>
<h1>work_queue.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
A master-worker library. 
<p>
The work queue provides an implementation of the master-worker computing model using TCP sockets, Unix applications, and files as intermediate buffers. A master process uses <a class="el" href="work__queue_8h.html#7bc74d6f5bde31f8a4a08ca0c2bafa72">work_queue_create</a> to create a queue, then <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a> to submit tasks. Once tasks are running, call <a class="el" href="work__queue_8h.html#fd6ce91a68a5d68e423058bd876c98d2">work_queue_wait</a> to wait for completion. The generic <code>worker</code> program can be run on any machine, and simply needs to be told the host and port of the master. 
<p>
<code>#include &quot;<a class="el" href="timestamp_8h-source.html">timestamp.h</a>&quot;</code><br>

<p>
<a href="work__queue_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwork__queue__task.html">work_queue_task</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A task description.  <a href="structwork__queue__task.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwork__queue__stats.html">work_queue_stats</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Statistics describing a work queue.  <a href="structwork__queue__stats.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">work_queue *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#7bc74d6f5bde31f8a4a08ca0c2bafa72">work_queue_create</a> (int port, time_t stoptime)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new work queue.  <a href="#7bc74d6f5bde31f8a4a08ca0c2bafa72"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#4a292be23ed3988cc9e92389f8356b6b">work_queue_delete</a> (struct work_queue *q)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a work queue.  <a href="#4a292be23ed3988cc9e92389f8356b6b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#8eb8088ee337106351c8646adc319de8">work_queue_get_stats</a> (struct work_queue *q, struct <a class="el" href="structwork__queue__stats.html">work_queue_stats</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get queue statistics.  <a href="#8eb8088ee337106351c8646adc319de8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#b14593aa7b1d2afbeef2c88799e02ba6">work_queue_activate_fast_abort</a> (struct work_queue *q, double multiplier)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Turn on or off fast abort functionality for a given queue.  <a href="#b14593aa7b1d2afbeef2c88799e02ba6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#d4abbb8a5e40460e0d60f7e1d60d2509">work_queue_specify_scheduler</a> (struct work_queue *q, int alg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the worker selection algorithm for a given queue.  <a href="#d4abbb8a5e40460e0d60f7e1d60d2509"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#fd6ce91a68a5d68e423058bd876c98d2">work_queue_wait</a> (struct work_queue *q, int timeout)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for tasks to complete.  <a href="#fd6ce91a68a5d68e423058bd876c98d2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a> (struct work_queue *q, struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Submit a job to a work queue.  <a href="#dff87a8f1b7f63d018c37eb38502aa93"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#abb0948d8e71e97ee786d636d8fca5ab">work_queue_task_delete</a> (struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a task specification.  <a href="#abb0948d8e71e97ee786d636d8fca5ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#d1343a34f7792d877bcc79a84bb436fd">work_queue_task_create</a> (const char *full_command)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new task specification.  <a href="#d1343a34f7792d877bcc79a84bb436fd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#2e68c00abc2afe0a93649d67e863b848">work_queue_task_specify_tag</a> (struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t, const char *tag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attach a user defined logical name to the task.  <a href="#2e68c00abc2afe0a93649d67e863b848"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#eb0a0003999772adb044d0800ae31adb">work_queue_task_specify_scheduler</a> (struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t, int alg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Further define a task specification.  <a href="#eb0a0003999772adb044d0800ae31adb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#6e43cd3ad5122eedc65f6fdc4b34ef71">work_queue_task_specify_input_buf</a> (struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t, const char *buf, int length, const char *rname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Further define a task specification.  <a href="#6e43cd3ad5122eedc65f6fdc4b34ef71"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#b552b86e7c1c65f2e3e239ca8e213c5c">work_queue_task_specify_input_file</a> (struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t, const char *fname, const char *rname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Further define a task specification.  <a href="#b552b86e7c1c65f2e3e239ca8e213c5c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#8ced38e7b501fa4eee44af3ba4e51c58">work_queue_task_specify_output_file</a> (struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *t, const char *rname, const char *fname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Further define a task specification.  <a href="#8ced38e7b501fa4eee44af3ba4e51c58"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#fb70bbdb96e69717acd2d53554171d5c">work_queue_hungry</a> (struct work_queue *q)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether the queue can support more tasks.  <a href="#fb70bbdb96e69717acd2d53554171d5c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#825de0cbb8b3bf49b936d697d85e6157">work_queue_empty</a> (struct work_queue *q)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether there are any known tasks queued, running, or waiting to be collected.  <a href="#825de0cbb8b3bf49b936d697d85e6157"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#c8a7df762311589c0e9c91b13f6d4e80">work_queue_shut_down_workers</a> (struct work_queue *q, int n)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shut down workers connected to the work_queue system.  <a href="#c8a7df762311589c0e9c91b13f6d4e80"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#347c0916bec6201436bb7618b5a46d0c">wq_option_fast_abort_multiplier</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initial setting for fast abort multiplier upon creating queue.  <a href="#347c0916bec6201436bb7618b5a46d0c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="work__queue_8h.html#564c89add39f633ca105efd223d44846">wq_option_scheduler</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initial setting for algorithm to assign tasks to workers upon creating queue .  <a href="#564c89add39f633ca105efd223d44846"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="7bc74d6f5bde31f8a4a08ca0c2bafa72"></a><!-- doxytag: member="work_queue.h::work_queue_create" ref="7bc74d6f5bde31f8a4a08ca0c2bafa72" args="(int port, time_t stoptime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct work_queue* work_queue_create           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>stoptime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new work queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>The port number to listen on, or zero to choose a default. The default port is 9123, but can be overridden by the environment variable WORK_QUEUE_PORT. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stoptime</em>&nbsp;</td><td>The time at which to return null if not yet able to be created. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A new work queue, or null if it could not be created. </dd></dl>

</div>
</div><p>
<a class="anchor" name="4a292be23ed3988cc9e92389f8356b6b"></a><!-- doxytag: member="work_queue.h::work_queue_delete" ref="4a292be23ed3988cc9e92389f8356b6b" args="(struct work_queue *q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_delete           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a work queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>The work queue to delete. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8eb8088ee337106351c8646adc319de8"></a><!-- doxytag: member="work_queue.h::work_queue_get_stats" ref="8eb8088ee337106351c8646adc319de8" args="(struct work_queue *q, struct work_queue_stats *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_get_stats           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__stats.html">work_queue_stats</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get queue statistics. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>The queue to query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>A pointer to a buffer that will be filed with statistics. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="b14593aa7b1d2afbeef2c88799e02ba6"></a><!-- doxytag: member="work_queue.h::work_queue_activate_fast_abort" ref="b14593aa7b1d2afbeef2c88799e02ba6" args="(struct work_queue *q, double multiplier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int work_queue_activate_fast_abort           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>multiplier</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Turn on or off fast abort functionality for a given queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>A pointer to the queue to modify. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>multiplier</em>&nbsp;</td><td>The multiplier of the average task time at which point to abort; if negative (and by default) fast_abort is deactivated. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if activated or deactivated with an appropriate multiplier, 1 if deactivated due to inappropriate multiplier. </dd></dl>

</div>
</div><p>
<a class="anchor" name="d4abbb8a5e40460e0d60f7e1d60d2509"></a><!-- doxytag: member="work_queue.h::work_queue_specify_scheduler" ref="d4abbb8a5e40460e0d60f7e1d60d2509" args="(struct work_queue *q, int alg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int work_queue_specify_scheduler           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>alg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the worker selection algorithm for a given queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>A pointer to the queue to modify. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>alg</em>&nbsp;</td><td>The algorithm to use in assigning a task to a worker. Valid possibilities are defined in this file as "WORK_QUEUE_SCHEDULE_X" values. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fd6ce91a68a5d68e423058bd876c98d2"></a><!-- doxytag: member="work_queue.h::work_queue_wait" ref="fd6ce91a68a5d68e423058bd876c98d2" args="(struct work_queue *q, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a>* work_queue_wait           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for tasks to complete. 
<p>
This call will block until the timeout has elapsed. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>The work queue to wait on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>The number of seconds to wait for a completed task before returning. Use an integer time to set the timeout or the constant WAITFORTASK to block until a task has completed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A completed task description, or null if the queue is empty or the timeout was reached without a completed task. The returned task must be deleted with <a class="el" href="work__queue_8h.html#abb0948d8e71e97ee786d636d8fca5ab">work_queue_task_delete</a> or resubmitted with <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="dff87a8f1b7f63d018c37eb38502aa93"></a><!-- doxytag: member="work_queue.h::work_queue_submit" ref="dff87a8f1b7f63d018c37eb38502aa93" args="(struct work_queue *q, struct work_queue_task *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_submit           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Submit a job to a work queue. 
<p>
It is safe to re-submit a task returned by <a class="el" href="work__queue_8h.html#fd6ce91a68a5d68e423058bd876c98d2">work_queue_wait</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>A work queue returned from <a class="el" href="work__queue_8h.html#7bc74d6f5bde31f8a4a08ca0c2bafa72">work_queue_create</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>A task description returned from <a class="el" href="work__queue_8h.html#d1343a34f7792d877bcc79a84bb436fd">work_queue_task_create</a>. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="abb0948d8e71e97ee786d636d8fca5ab"></a><!-- doxytag: member="work_queue.h::work_queue_task_delete" ref="abb0948d8e71e97ee786d636d8fca5ab" args="(struct work_queue_task *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_task_delete           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a task specification. 
<p>
This may be called on tasks after they are returned from <a class="el" href="work__queue_8h.html#fd6ce91a68a5d68e423058bd876c98d2">work_queue_wait</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>The task specification to delete. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="d1343a34f7792d877bcc79a84bb436fd"></a><!-- doxytag: member="work_queue.h::work_queue_task_create" ref="d1343a34f7792d877bcc79a84bb436fd" args="(const char *full_command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a>* work_queue_task_create           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>full_command</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new task specification. 
<p>
Once created, the task may be passed to <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>full_command</em>&nbsp;</td><td>The shell command line to be executed by the task. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="2e68c00abc2afe0a93649d67e863b848"></a><!-- doxytag: member="work_queue.h::work_queue_task_specify_tag" ref="2e68c00abc2afe0a93649d67e863b848" args="(struct work_queue_task *t, const char *tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_task_specify_tag           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attach a user defined logical name to the task. 
<p>
This field is not interpreted by the work queue, but simply maintained to help the user track tasks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>The task to which to add parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tag</em>&nbsp;</td><td>The tag to attach to task t. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="eb0a0003999772adb044d0800ae31adb"></a><!-- doxytag: member="work_queue.h::work_queue_task_specify_scheduler" ref="eb0a0003999772adb044d0800ae31adb" args="(struct work_queue_task *t, int alg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int work_queue_task_specify_scheduler           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>alg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Further define a task specification. 
<p>
Once completed, the task may be passed to <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>The task to which to add parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>alg</em>&nbsp;</td><td>The algorithm to use in assigning a task to a worker. Valid possibilities are defined in this file as "WORK_QUEUE_SCHEDULE_X" values. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="6e43cd3ad5122eedc65f6fdc4b34ef71"></a><!-- doxytag: member="work_queue.h::work_queue_task_specify_input_buf" ref="6e43cd3ad5122eedc65f6fdc4b34ef71" args="(struct work_queue_task *t, const char *buf, int length, const char *rname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_task_specify_input_buf           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>rname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Further define a task specification. 
<p>
Once completed, the task may be passed to <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>The task to which to add parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the data buffer to send to the worker to be available to the commands. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>The number of bytes of data in the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rname</em>&nbsp;</td><td>The name of the file in which to store the buffer data on the worker </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="b552b86e7c1c65f2e3e239ca8e213c5c"></a><!-- doxytag: member="work_queue.h::work_queue_task_specify_input_file" ref="b552b86e7c1c65f2e3e239ca8e213c5c" args="(struct work_queue_task *t, const char *fname, const char *rname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_task_specify_input_file           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>rname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Further define a task specification. 
<p>
Once completed, the task may be passed to <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>The task to which to add parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fname</em>&nbsp;</td><td>The name of the data file to send to the worker to be available to the commands. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rname</em>&nbsp;</td><td>The name of the file in which to store the buffer data on the worker </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8ced38e7b501fa4eee44af3ba4e51c58"></a><!-- doxytag: member="work_queue.h::work_queue_task_specify_output_file" ref="8ced38e7b501fa4eee44af3ba4e51c58" args="(struct work_queue_task *t, const char *rname, const char *fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void work_queue_task_specify_output_file           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwork__queue__task.html">work_queue_task</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>rname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Further define a task specification. 
<p>
Once completed, the task may be passed to <a class="el" href="work__queue_8h.html#dff87a8f1b7f63d018c37eb38502aa93">work_queue_submit</a>. If no file is defined, the program will have default (no) output files retrieved. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>The task to which to add parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rname</em>&nbsp;</td><td>The name of a file created by the program when it runs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fname</em>&nbsp;</td><td>The name of the file local target for copying rname back. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fb70bbdb96e69717acd2d53554171d5c"></a><!-- doxytag: member="work_queue.h::work_queue_hungry" ref="fb70bbdb96e69717acd2d53554171d5c" args="(struct work_queue *q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int work_queue_hungry           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine whether the queue can support more tasks. 
<p>
Returns the number of additional tasks it can support if "hungry" and 0 if "sated". <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>A pointer to the queue to query. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="825de0cbb8b3bf49b936d697d85e6157"></a><!-- doxytag: member="work_queue.h::work_queue_empty" ref="825de0cbb8b3bf49b936d697d85e6157" args="(struct work_queue *q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int work_queue_empty           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine whether there are any known tasks queued, running, or waiting to be collected. 
<p>
Returns 0 if there are tasks remaining in the system, 1 if the system is "empty". <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>A pointer to the queue to query. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="c8a7df762311589c0e9c91b13f6d4e80"></a><!-- doxytag: member="work_queue.h::work_queue_shut_down_workers" ref="c8a7df762311589c0e9c91b13f6d4e80" args="(struct work_queue *q, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int work_queue_shut_down_workers           </td>
          <td>(</td>
          <td class="paramtype">struct work_queue *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Shut down workers connected to the work_queue system. 
<p>
Gives a best effort and then returns the number of workers given the shut down order. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>A pointer to the queue to query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n</em>&nbsp;</td><td>The number to shut down. All workers if given "0". </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="347c0916bec6201436bb7618b5a46d0c"></a><!-- doxytag: member="work_queue.h::wq_option_fast_abort_multiplier" ref="347c0916bec6201436bb7618b5a46d0c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="work__queue_8h.html#347c0916bec6201436bb7618b5a46d0c">wq_option_fast_abort_multiplier</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initial setting for fast abort multiplier upon creating queue. 
<p>
Turned off if less than 0. Change prior to calling work_queue_create, after queue is created this variable is not considered and changes must be made through the API calls. 
</div>
</div><p>
<a class="anchor" name="564c89add39f633ca105efd223d44846"></a><!-- doxytag: member="work_queue.h::wq_option_scheduler" ref="564c89add39f633ca105efd223d44846" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="work__queue_8h.html#564c89add39f633ca105efd223d44846">wq_option_scheduler</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initial setting for algorithm to assign tasks to workers upon creating queue . 
<p>
Change prior to calling work_queue_create, after queue is created this variable is not considered and changes must be made through the API calls. 
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Mar 29 15:56:19 2010 for cctools by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
